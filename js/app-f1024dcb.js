!function(){"use strict";var e=Ember.Application.create({LOG_TRANSITIONS:!0});e.ApplicationAdapter=DS.FixtureAdapter,window.App=e,Ember.View.reopen({init:function(){this._super();var e=this;Em.keys(this).forEach(function(t){"data-"===t.substr(0,5)&&e.get("attributeBindings").pushObject(t)})}}),FastClick.attach(document.body),WebFont.load({google:{families:["Lato","Overclock"]}})}(),this.Ember=this.Ember||{},this.Ember.TEMPLATES=this.Ember.TEMPLATES||{},this.Ember.TEMPLATES.application=Ember.Handlebars.template(function(e,t,s,a,n){this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var r,o,i,l,h="",p=this.escapeExpression,u=s.helperMissing;return n.buffer.push("<header>\n    app header\n</header>\n\n"),o={},i={},n.buffer.push(p(s._triageMustache.call(t,"outlet",{hash:{},contexts:[t],types:["ID"],hashContexts:i,hashTypes:o,data:n}))),n.buffer.push("\n\n<footer>\n    app footer\n</footer>\n\n\n"),o={},i={},l={hash:{},contexts:[t],types:["ID"],hashContexts:i,hashTypes:o,data:n},n.buffer.push(p((r=s.outlet||t&&t.outlet,r?r.call(t,"modal",l):u.call(t,"outlet","modal",l)))),n.buffer.push("\n"),h}),this.Ember.TEMPLATES.blocks=Ember.Handlebars.template(function(e,t,s,a,n){this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var r,o,i="",l=this.escapeExpression;return n.buffer.push('<section class="blocks" id="blocksapp">\n    '),r={},o={},n.buffer.push(l(s._triageMustache.call(t,"outlet",{hash:{},contexts:[t],types:["ID"],hashContexts:o,hashTypes:r,data:n}))),n.buffer.push("\n</section>\n"),i}),this.Ember.TEMPLATES.focuspoint=Ember.Handlebars.template(function(e,t,s,a,n){this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var r,o,i,l,h="",p=s.helperMissing,u=this.escapeExpression;return n.buffer.push('<div class="block__image js-focuspoint"\n    '),o={"data-focus-x":t},i={"data-focus-x":"ID"},l={hash:{"data-focus-x":"focusX"},contexts:[],types:[],hashContexts:o,hashTypes:i,data:n},n.buffer.push(u((r=s["bind-attr"]||t&&t["bind-attr"],r?r.call(t,l):p.call(t,"bind-attr",l)))),n.buffer.push("\n    "),o={"data-focus-y":t},i={"data-focus-y":"ID"},l={hash:{"data-focus-y":"focusY"},contexts:[],types:[],hashContexts:o,hashTypes:i,data:n},n.buffer.push(u((r=s["bind-attr"]||t&&t["bind-attr"],r?r.call(t,l):p.call(t,"bind-attr",l)))),n.buffer.push("\n    "),o={"data-image-w":t},i={"data-image-w":"ID"},l={hash:{"data-image-w":"imageW"},contexts:[],types:[],hashContexts:o,hashTypes:i,data:n},n.buffer.push(u((r=s["bind-attr"]||t&&t["bind-attr"],r?r.call(t,l):p.call(t,"bind-attr",l)))),n.buffer.push("\n    "),o={"data-image-h":t},i={"data-image-h":"ID"},l={hash:{"data-image-h":"imageH"},contexts:[],types:[],hashContexts:o,hashTypes:i,data:n},n.buffer.push(u((r=s["bind-attr"]||t&&t["bind-attr"],r?r.call(t,l):p.call(t,"bind-attr",l)))),n.buffer.push(">\n    <img "),o={src:t},i={src:"ID"},l={hash:{src:"image"},contexts:[],types:[],hashContexts:o,hashTypes:i,data:n},n.buffer.push(u((r=s["bind-attr"]||t&&t["bind-attr"],r?r.call(t,l):p.call(t,"bind-attr",l)))),n.buffer.push(">\n</div>\n"),h}),this.Ember.TEMPLATES.focuspointhelper=Ember.Handlebars.template(function(e,t,s,a,n){this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var r,o,i,l,h="",p=s.helperMissing,u=this.escapeExpression;return n.buffer.push('<div class="focuspoint-helper">\n    <img class="focuspoint-helper__image" '),o={src:t},i={src:"ID"},l={hash:{src:"view.image"},contexts:[],types:[],hashContexts:o,hashTypes:i,data:n},n.buffer.push(u((r=s["bind-attr"]||t&&t["bind-attr"],r?r.call(t,l):p.call(t,"bind-attr",l)))),n.buffer.push('>\n    <div class="focuspoint-helper__reticle circle"></div>\n    <img class="focuspoint-helper__image focuspoint-helper__overlay" '),o={src:t},i={src:"ID"},l={hash:{src:"view.image"},contexts:[],types:[],hashContexts:o,hashTypes:i,data:n},n.buffer.push(u((r=s["bind-attr"]||t&&t["bind-attr"],r?r.call(t,l):p.call(t,"bind-attr",l)))),n.buffer.push(">\n</div>\n"),h}),this.Ember.TEMPLATES.index=Ember.Handlebars.template(function(e,t,s,a,n){function r(e,t){t.buffer.push("go to pages")}this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var o,i,l,h,p,u="",c=this,f=s.helperMissing;return n.buffer.push('<section id="index">\n    <h1>Welcome to Gallery</h1>\n    '),l={},h={},p={hash:{},inverse:c.noop,fn:c.program(1,r,n),contexts:[t],types:["STRING"],hashContexts:h,hashTypes:l,data:n},o=s["link-to"]||t&&t["link-to"],i=o?o.call(t,"pages",p):f.call(t,"link-to","pages",p),(i||0===i)&&n.buffer.push(i),n.buffer.push("\n</section>\n"),u}),this.Ember.TEMPLATES.modal=Ember.Handlebars.template(function(e,t,s,a,n){function r(e,t){var a,n,r="";return t.buffer.push("\n    <h2>Generic modal for Application use</h2>\n    <button "),a={},n={},t.buffer.push(c(s.action.call(e,"close",{hash:{},contexts:[e],types:["STRING"],hashContexts:n,hashTypes:a,data:t}))),t.buffer.push(">Close</button>\n"),r}this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var o,i,l,h,p,u="",c=this.escapeExpression,f=this,b=s.helperMissing;return l={action:t},h={action:"STRING"},p={hash:{action:"close"},inverse:f.noop,fn:f.program(1,r,n),contexts:[],types:[],hashContexts:l,hashTypes:h,data:n},o=s["modal-dialog"]||t&&t["modal-dialog"],i=o?o.call(t,p):b.call(t,"modal-dialog",p),(i||0===i)&&n.buffer.push(i),n.buffer.push("\n"),u}),this.Ember.TEMPLATES.page=Ember.Handlebars.template(function(e,t,s,a,n){function r(e,t){t.buffer.push("new block")}function o(e,t){t.buffer.push("back to pages")}this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var i,l,h,p,u,c="",f=this,b=s.helperMissing,d=this.escapeExpression;return n.buffer.push('<div class="page">\n    <ul class="page__controls">\n        <li>\n            '),h={},p={},u={hash:{},inverse:f.noop,fn:f.program(1,r,n),contexts:[t],types:["STRING"],hashContexts:p,hashTypes:h,data:n},i=s["link-to"]||t&&t["link-to"],l=i?i.call(t,"blocks.new",u):b.call(t,"link-to","blocks.new",u),(l||0===l)&&n.buffer.push(l),n.buffer.push("\n        </li>\n    </ul>\n    "),h={},p={},n.buffer.push(d(s._triageMustache.call(t,"outlet",{hash:{},contexts:[t],types:["ID"],hashContexts:p,hashTypes:h,data:n}))),n.buffer.push('\n    <div class="page__back">\n        '),h={},p={},u={hash:{},inverse:f.noop,fn:f.program(3,o,n),contexts:[t],types:["STRING"],hashContexts:p,hashTypes:h,data:n},i=s["link-to"]||t&&t["link-to"],l=i?i.call(t,"pages",u):b.call(t,"link-to","pages",u),(l||0===l)&&n.buffer.push(l),n.buffer.push("\n    </div>\n</div>\n"),c}),this.Ember.TEMPLATES.pages=Ember.Handlebars.template(function(e,t,s,a,n){function r(e,t){t.buffer.push("new page")}function o(e,t){t.buffer.push("back to index")}this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var i,l,h,p,u,c="",f=this,b=s.helperMissing,d=this.escapeExpression;return n.buffer.push('<section id="pagesapp">\n    <header class="hero" id="hero">\n        <h1 class="hero__title">Pages</h1>\n    </header>\n\n    <section id="main">\n        <ul class="pages__controls">\n            <li>\n                '),h={},p={},u={hash:{},inverse:f.noop,fn:f.program(1,r,n),contexts:[t],types:["STRING"],hashContexts:p,hashTypes:h,data:n},i=s["link-to"]||t&&t["link-to"],l=i?i.call(t,"pages.new",u):b.call(t,"link-to","pages.new",u),(l||0===l)&&n.buffer.push(l),n.buffer.push("\n            </li>\n        </ul>\n        "),h={},p={},n.buffer.push(d(s._triageMustache.call(t,"outlet",{hash:{},contexts:[t],types:["ID"],hashContexts:p,hashTypes:h,data:n}))),n.buffer.push("\n    </section>\n\n    <footer>\n        <p>"),h={},p={},u={hash:{},inverse:f.noop,fn:f.program(3,o,n),contexts:[t],types:["STRING"],hashContexts:p,hashTypes:h,data:n},i=s["link-to"]||t&&t["link-to"],l=i?i.call(t,"index",u):b.call(t,"link-to","index",u),(l||0===l)&&n.buffer.push(l),n.buffer.push("</p>\n        <p>pages footer</p>\n    </footer>\n</section>\n"),c}),this.Ember.TEMPLATES["blocks/index"]=Ember.Handlebars.template(function(e,t,s,a,n){function r(e,t){var a,n,r,l,h,p="";return t.buffer.push('\n    <div class="block flex" '),r={"class":e},l={"class":"STRING"},h={hash:{"class":"isEditing:block--editing"},contexts:[],types:[],hashContexts:r,hashTypes:l,data:t},t.buffer.push(f((a=s["bind-attr"]||e&&e["bind-attr"],a?a.call(e,h):c.call(e,"bind-attr",h)))),t.buffer.push(">\n        "),r={image:e,focusX:e,focusY:e},l={image:"ID",focusX:"ID",focusY:"ID"},t.buffer.push(f(s.view.call(e,"App.FocuspointView",{hash:{image:"image",focusX:"focusX",focusY:"focusY"},contexts:[e],types:["ID"],hashContexts:r,hashTypes:l,data:t}))),t.buffer.push('\n        <div class="block__content center--xy text--bordered text--center">\n            <h2 class="block__title text--uppercase">'),l={},r={},t.buffer.push(f(s._triageMustache.call(e,"title",{hash:{},contexts:[e],types:["ID"],hashContexts:r,hashTypes:l,data:t}))),t.buffer.push('</h2>\n            <p class="block__paragraph">'),l={},r={},t.buffer.push(f(s._triageMustache.call(e,"paragraph",{hash:{},contexts:[e],types:["ID"],hashContexts:r,hashTypes:l,data:t}))),t.buffer.push('</p>\n            <button class="block__toggle-edit" '),l={},r={},t.buffer.push(f(s.action.call(e,"toggleEdit",{hash:{},contexts:[e],types:["STRING"],hashContexts:r,hashTypes:l,data:t}))),t.buffer.push(">"),l={},r={},n=s["if"].call(e,"isEditing",{hash:{},inverse:b.program(4,i,t),fn:b.program(2,o,t),contexts:[e],types:["ID"],hashContexts:r,hashTypes:l,data:t}),(n||0===n)&&t.buffer.push(n),t.buffer.push('</button>\n        </div>\n        <ul class="block__controls">\n            <li>\n                <label class="label">\n                    <span>Edit image</span>\n                    '),r={type:e,value:e,placeholder:e,action:e,on:e},l={type:"ID",value:"ID",placeholder:"STRING",action:"STRING",on:"STRING"},h={hash:{type:"text",value:"newImage",placeholder:"New image URL",action:"updateImage",on:"enter"},contexts:[],types:[],hashContexts:r,hashTypes:l,data:t},t.buffer.push(f((a=s.input||e&&e.input,a?a.call(e,h):c.call(e,"input",h)))),t.buffer.push('\n                </label>\n            </li>\n            <li>\n                <label class="label">\n                    <span>Edit focus point</span>\n                    '),r={image:e},l={image:"ID"},t.buffer.push(f(s.view.call(e,"App.FocuspointhelperView",{hash:{image:"image"},contexts:[e],types:["ID"],hashContexts:r,hashTypes:l,data:t}))),t.buffer.push("\n                </label>\n            </li>\n        </ul>\n    </div>\n"),p}function o(e,t){t.buffer.push("Done")}function i(e,t){t.buffer.push("Edit")}this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var l,h,p,u="",c=s.helperMissing,f=this.escapeExpression,b=this;return h={itemController:t},p={itemController:"STRING"},l=s.each.call(t,{hash:{itemController:"block"},inverse:b.noop,fn:b.program(1,r,n),contexts:[],types:[],hashContexts:h,hashTypes:p,data:n}),(l||0===l)&&n.buffer.push(l),n.buffer.push("\n"),u}),this.Ember.TEMPLATES["blocks/new"]=Ember.Handlebars.template(function(e,t,s,a,n){function r(e,t){t.buffer.push("back to blocks")}this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var o,i,l,h,p,u="",c=s.helperMissing,f=this.escapeExpression,b=this;return n.buffer.push('<h1>Create block</h1>\n\n<ul class="blocks__controls">\n    <li>\n        <label>\n            <span>Title</span>\n            '),l={type:t,placeholder:t,value:t},h={type:"STRING",placeholder:"STRING",value:"ID"},p={hash:{type:"text",placeholder:"Title your block",value:"newTitle"},contexts:[],types:[],hashContexts:l,hashTypes:h,data:n},n.buffer.push(f((o=s.input||t&&t.input,o?o.call(t,p):c.call(t,"input",p)))),n.buffer.push("\n        </label>\n    </li>\n    <li>\n        <label>\n            <span>Paragraph</span>\n            "),l={type:t,placeholder:t,value:t},h={type:"STRING",placeholder:"STRING",value:"ID"},p={hash:{type:"text",placeholder:"Give your block a paragraph (optional)",value:"newParagraph"},contexts:[],types:[],hashContexts:l,hashTypes:h,data:n},n.buffer.push(f((o=s.input||t&&t.input,o?o.call(t,p):c.call(t,"input",p)))),n.buffer.push("\n        </label>\n    </li>\n    <li>\n        <label>\n            <span>Image</span>\n            "),l={type:t,placeholder:t,value:t},h={type:"STRING",placeholder:"STRING",value:"ID"},p={hash:{type:"text",placeholder:"Give your block an image (optional)",value:"newImage"},contexts:[],types:[],hashContexts:l,hashTypes:h,data:n},n.buffer.push(f((o=s.input||t&&t.input,o?o.call(t,p):c.call(t,"input",p)))),n.buffer.push("\n        </label>\n    </li>\n    <li>\n        <button "),h={},l={},n.buffer.push(f(s.action.call(t,"createblock",{hash:{},contexts:[t],types:["STRING"],hashContexts:l,hashTypes:h,data:n}))),n.buffer.push(">Create block</button>\n        <!-- TODO make block adding work -->\n    </li>\n</ul>\n\n<div>\n    "),h={},l={},p={hash:{},inverse:b.noop,fn:b.program(1,r,n),contexts:[t],types:["STRING"],hashContexts:l,hashTypes:h,data:n},o=s["link-to"]||t&&t["link-to"],i=o?o.call(t,"blocks",p):c.call(t,"link-to","blocks",p),(i||0===i)&&n.buffer.push(i),n.buffer.push("\n</div>\n"),u}),this.Ember.TEMPLATES["components/modal-dialog"]=Ember.Handlebars.template(function(e,t,s,a,n){this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var r,o,i="",l=this.escapeExpression;return n.buffer.push('<div class="overlay" '),r={},o={},n.buffer.push(l(s.action.call(t,"close",{hash:{},contexts:[t],types:["STRING"],hashContexts:o,hashTypes:r,data:n}))),n.buffer.push('></div>\n<div class="modal">\n    '),r={},o={},n.buffer.push(l(s._triageMustache.call(t,"yield",{hash:{},contexts:[t],types:["ID"],hashContexts:o,hashTypes:r,data:n}))),n.buffer.push("\n</div>\n"),i}),this.Ember.TEMPLATES["pages/index"]=Ember.Handlebars.template(function(e,t,s,a,n){function r(e,t){var a,n,r,i,l,h="";return t.buffer.push('\n    <li class="page list__item" '),r={style:e},i={style:"ID"},l={hash:{style:"imageStyle"},contexts:[],types:[],hashContexts:r,hashTypes:i,data:t},t.buffer.push(b((a=s["bind-attr"]||e&&e["bind-attr"],a?a.call(e,l):f.call(e,"bind-attr",l)))),t.buffer.push(">\n            "),i={},r={},l={hash:{},inverse:d.noop,fn:d.program(2,o,t),contexts:[e,e],types:["STRING","ID"],hashContexts:r,hashTypes:i,data:t},a=s["link-to"]||e&&e["link-to"],n=a?a.call(e,"blocks","",l):f.call(e,"link-to","blocks","",l),(n||0===n)&&t.buffer.push(n),t.buffer.push("\n        </li>\n    "),h}function o(e,t){var a,n,r,o="";return t.buffer.push("\n            "),n={},r={},a=s["if"].call(e,"image",{hash:{},inverse:d.program(5,l,t),fn:d.program(3,i,t),contexts:[e],types:["ID"],hashContexts:r,hashTypes:n,data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("\n            "),o}function i(e,t){var a,n,r,o,i="";return t.buffer.push("\n            <img "),n={src:e},r={src:"ID"},o={hash:{src:"image"},contexts:[],types:[],hashContexts:n,hashTypes:r,data:t},t.buffer.push(b((a=s["bind-attr"]||e&&e["bind-attr"],a?a.call(e,o):f.call(e,"bind-attr",o)))),t.buffer.push(" "),n={alt:e},r={alt:"STRING"},o={hash:{alt:"{{title}}"},contexts:[],types:[],hashContexts:n,hashTypes:r,data:t},t.buffer.push(b((a=s["bind-attr"]||e&&e["bind-attr"],a?a.call(e,o):f.call(e,"bind-attr",o)))),t.buffer.push(">\n            "),i}function l(e,t){var a,n,r="";return t.buffer.push("\n            "),a={},n={},t.buffer.push(b(s._triageMustache.call(e,"title",{hash:{},contexts:[e],types:["ID"],hashContexts:n,hashTypes:a,data:t}))),t.buffer.push("\n            "),r}this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var h,p,u,c="",f=s.helperMissing,b=this.escapeExpression,d=this;return n.buffer.push('<ul class="list list-bare" id="pages">\n    '),p={itemController:t},u={itemController:"STRING"},h=s.each.call(t,{hash:{itemController:"page"},inverse:d.noop,fn:d.program(1,r,n),contexts:[],types:[],hashContexts:p,hashTypes:u,data:n}),(h||0===h)&&n.buffer.push(h),n.buffer.push("\n</ul>\n"),c}),this.Ember.TEMPLATES["pages/new"]=Ember.Handlebars.template(function(e,t,s,a,n){function r(e,t){t.buffer.push("back to pages")}this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var o,i,l,h,p,u="",c=s.helperMissing,f=this.escapeExpression,b=this;return n.buffer.push('<h1>Create a new page</h1>\n\n<ul class="pages__controls">\n    <li>\n        <label>\n            <span>Title</span>\n            '),l={type:t,placeholder:t,value:t},h={type:"STRING",placeholder:"STRING",value:"ID"},p={hash:{type:"text",placeholder:"Title your page",value:"newTitle"},contexts:[],types:[],hashContexts:l,hashTypes:h,data:n},n.buffer.push(f((o=s.input||t&&t.input,o?o.call(t,p):c.call(t,"input",p)))),n.buffer.push("\n        </label>\n    </li>\n    <li>\n        <label>\n            <span>Slug</span>\n            "),l={type:t,placeholder:t,value:t},h={type:"STRING",placeholder:"STRING",value:"ID"},p={hash:{type:"text",placeholder:"Give your page a slug (optional)",value:"newSlug"},contexts:[],types:[],hashContexts:l,hashTypes:h,data:n},n.buffer.push(f((o=s.input||t&&t.input,o?o.call(t,p):c.call(t,"input",p)))),n.buffer.push("\n        </label>\n    </li>\n    <li>\n        <label>\n            <span>Paragraph</span>\n            "),l={type:t,placeholder:t,value:t},h={type:"STRING",placeholder:"STRING",value:"ID"},p={hash:{type:"text",placeholder:"Give your page a paragraph (optional)",value:"newParagraph"},contexts:[],types:[],hashContexts:l,hashTypes:h,data:n},n.buffer.push(f((o=s.input||t&&t.input,o?o.call(t,p):c.call(t,"input",p)))),n.buffer.push("\n        </label>\n    </li>\n    <li>\n        <label>\n            <span>Image</span>\n            "),l={type:t,placeholder:t,value:t},h={type:"STRING",placeholder:"STRING",value:"ID"},p={hash:{type:"text",placeholder:"Give your page an image (optional)",value:"newImage"},contexts:[],types:[],hashContexts:l,hashTypes:h,data:n},n.buffer.push(f((o=s.input||t&&t.input,o?o.call(t,p):c.call(t,"input",p)))),n.buffer.push("\n        </label>\n    </li>\n    <li>\n        <button "),h={},l={},n.buffer.push(f(s.action.call(t,"createPage",{hash:{},contexts:[t],types:["STRING"],hashContexts:l,hashTypes:h,data:n}))),n.buffer.push(">Create page</button>\n    </li>\n</ul>\n\n<div>\n    "),h={},l={},p={hash:{},inverse:b.noop,fn:b.program(1,r,n),contexts:[t],types:["STRING"],hashContexts:l,hashTypes:h,data:n},o=s["link-to"]||t&&t["link-to"],i=o?o.call(t,"pages",p):c.call(t,"link-to","pages",p),(i||0===i)&&n.buffer.push(i),n.buffer.push("\n</ul>\n"),u}),function(){"use strict";App.Router.map(function(){this.resource("pages",{path:"/pages"},function(){this.route("new")}),this.resource("page",{path:"/pages/:page_slug"},function(){this.resource("blocks",function(){this.route("new")})})}),App.ApplicationRoute=Ember.Route.extend({actions:{openModal:function(e,t){return this.controllerFor(e).set("model",t),this.render(e,{into:"application",outlet:"modal"})},closeModal:function(){return this.disconnectOutlet({outlet:"modal",parentView:"application"})}}}),App.PagesRoute=Ember.Route.extend({model:function(){return this.store.find("page")}}),App.PageRoute=Ember.Route.extend({model:function(e){return jQuery.getJSON("/pages/"+e.page_slug)},serialize:function(e){return{page_slug:e.get("slug")}}}),App.BlocksRoute=Ember.Route.extend({model:function(){return this.modelFor("page").get("blocks")},beforeModel:function(){var e=this.modelFor("page").get("blocks"),t=e.get("firstObject");return t?void this.transitionTo("blocks.index"):void this.transitionTo("blocks.new")}})}(),function(){"use strict";var e=DS.attr,t=DS.hasMany;App.Page=DS.Model.extend({createdAt:e("date",{defaultValue:function(){return(new Date).toISOString()}}),title:e("string"),slug:e("string"),paragraph:e("string"),image:e("string"),blocks:t("block",{async:!0})}),App.Page.reopenClass({FIXTURES:[{id:1,title:"Ferrari",slug:"ferrari",paragraph:"An expose of Ferrari's",image:"//lh6.googleusercontent.com/-c8CcCzSEH6w/UT4HMJE4j9I/AAAAAAABNj8/2puHpt9nL34/s250-no/prova_logo.jpg",blocks:[1,2]}]})}(),function(){"use strict";var e=DS.attr,t=DS.belongsTo;App.Block=DS.Model.extend({createdAt:e("date",{defaultValue:function(){return(new Date).toISOString()}}),title:e("string"),paragraph:e("string"),image:e("string"),focusX:e(""),focusY:e(""),imageW:e(""),imageH:e(""),page:t("page")}),App.Block.reopenClass({FIXTURES:[{id:1,title:"Ferrari Panorama",paragraph:"Ferrari (and a Lambo) Panorama taken at Cars and Coffee in Irvine.",image:"//farm8.staticflickr.com/7307/8732672635_ff80790616_k_d.jpg",focusX:0,focusY:0,imageW:2048,imageH:740,page:1},{id:2,title:"Axion23",paragraph:"Ferrari Supercars - F40, F50, and Enzo.",image:"//farm6.staticflickr.com/5332/9376918883_ef2844c3c0_k_d.jpg",focusX:0,focusY:0,imageW:2048,imageH:1356,page:1},{id:3,title:"Spot The Odd One Out",paragraph:"Roadtrip car feat some Lambos!",image:"//farm3.staticflickr.com/2898/14449510770_2f18830e87_k_d.jpg",focusX:0,focusY:0,imageW:2048,imageH:1365,page:2}]})}(),function(){"use strict";App.ModalController=Ember.ObjectController.extend({actions:{close:function(){return this.send("closeModal")}}})}(),function(){"use strict";App.PagesNewController=Ember.ArrayController.extend({actions:{createPage:function(){function e(e){console.log("success",e)}function t(e){console.log(e)}var s=this.get("newTitle"),a=this.get("newSlug"),n=this.get("newParagraph"),r=this.get("newImage");if(console.log(s,a,n,r),Ember.isEmpty(s))return!1;s=s.trim(),s&&!a&&(a=s.trim().dasherize());var o=this.store.createRecord("page",{title:s,slug:a,paragraph:n,image:r});o.save(e,t)}}})}(),function(){"use strict";App.PageController=Ember.ObjectController.extend({actions:{editPage:function(){this.set("isEditing",!0)}},isEditing:!1,imageStyle:function(){return"background-image: url("+this.get("image")+");"}.property("imageStyle")})}(),function(){"use strict";App.BlocksNewController=Ember.ArrayController.extend({actions:{createBlock:function(){var e=this.get("newTitle"),t=this.get("newParagraph"),s=this.get("newImage");if(Ember.isEmpty(e))return!1;e=e.trim();var a=this.store.createRecord("block",{title:e,paragraph:t,image:s});this.set("newTitle",""),this.set("newParagraph",""),this.set("newImage",""),a.save()}}})}(),function(){"use strict";App.BlockController=Ember.ObjectController.extend({actions:{editBlock:function(){this.set("isEditing",!0)},doneEditing:function(){this.set("isEditing",!1)},toggleEdit:function(){var e=this.get("isEditing");this.set("isEditing",!e)},updateFocusPoint:function(e){if(console.log("controller "+e),!Ember.isEmpty(e.focusX||Ember.isEmpty(e.focusY))){var t=this.get("model");t.setProperties(e),t.save()}},updateImage:function(){var e=this.get("newImage");if(!Ember.isEmpty(e)){var t=this.get("model");t.set("image",e),t.save(),console.log("updated image with "+e)}}},isEditing:!1,imageStyle:function(){return"background-image: url("+this.get("image")+");"}.property("imageStyle")})}(),function(){"use strict";App.ModalDialogComponent=Ember.Component.extend({actions:{close:function(){return this.sendAction()}}})}(),function(){"use strict";App.FocuspointView=Ember.View.extend({templateName:"focuspoint",didInsertElement:function(){Ember.run.scheduleOnce("afterRender",this,"processChildElements")},processChildElements:function(){this.$().find(".js-focuspoint").focusPoint({throttleDuration:100}),console.log("did focuspoint")}})}(),function(){"use strict";App.FocuspointhelperView=Ember.View.extend({templateName:"focuspointhelper",didInsertElement:function(){Ember.run.scheduleOnce("afterRender",this,"processChildElements")},processChildElements:function(){},click:function(e){var t={},s=jQuery(e.target),a=s.closest(".block").find(".js-focuspoint"),n=s.width(),r=s.height(),o=e.pageX-s.offset().left,i=e.pageY-s.offset().top,l=2*(o/n-.5),h=-2*(i/r-.5);t.focusX=l,t.focusY=h,this.get("controller").send("updateFocusPoint",t),a.attr({"data-focus-x":t.focusX,"data-focus-y":t.focusY}),a.data("focusX",t.focusX),a.data("focusY",t.focusY),a.focusPoint("adjustFocus");var p=o/n*100,u=i/r*100;s.closest(".focuspoint-helper").find(".focuspoint-helper__reticle").css({top:u+"%",left:p+"%"})}})}();