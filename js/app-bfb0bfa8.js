!function(){"use strict";var e=Ember.Application.create({LOG_TRANSITIONS:!0});e.ApplicationAdapter=DS.FixtureAdapter,window.App=e,Ember.View.reopen({init:function(){this._super();var e=this;Em.keys(this).forEach(function(t){"data-"===t.substr(0,5)&&e.get("attributeBindings").pushObject(t)})}}),FastClick.attach(document.body),WebFont.load({google:{families:["Lato","Overclock"]}})}(),this.Ember=this.Ember||{},this.Ember.TEMPLATES=this.Ember.TEMPLATES||{},this.Ember.TEMPLATES.application=Ember.Handlebars.template(function(e,t,a,s,n){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var r,i,l,o,p="",h=this.escapeExpression,u=a.helperMissing;return n.buffer.push("<header>\n    app header\n</header>\n\n"),i={},l={},n.buffer.push(h(a._triageMustache.call(t,"outlet",{hash:{},contexts:[t],types:["ID"],hashContexts:l,hashTypes:i,data:n}))),n.buffer.push("\n\n<footer>\n    app footer\n</footer>\n\n\n"),i={},l={},o={hash:{},contexts:[t],types:["ID"],hashContexts:l,hashTypes:i,data:n},n.buffer.push(h((r=a.outlet||t&&t.outlet,r?r.call(t,"modal",o):u.call(t,"outlet","modal",o)))),n.buffer.push("\n"),p}),this.Ember.TEMPLATES.blocks=Ember.Handlebars.template(function(e,t,a,s,n){function r(e,t){var s,n,r,o,p,h="";return t.buffer.push('\n        <div class="block flex" '),r={"class":e},o={"class":"STRING"},p={hash:{"class":"isEditing:block--editing"},contexts:[],types:[],hashContexts:r,hashTypes:o,data:t},t.buffer.push(f((s=a["bind-attr"]||e&&e["bind-attr"],s?s.call(e,p):c.call(e,"bind-attr",p)))),t.buffer.push(">\n            "),r={image:e,"data-focus-xBinding":e,"data-focus-yBinding":e,"data-image-wBinding":e,"data-image-hBinding":e},o={image:"ID","data-focus-xBinding":"ID","data-focus-yBinding":"ID","data-image-wBinding":"ID","data-image-hBinding":"ID"},p={hash:{image:"image","data-focus-xBinding":"focusX","data-focus-yBinding":"focusY","data-image-wBinding":"imageW","data-image-hBinding":"imageH"},contexts:[],types:[],hashContexts:r,hashTypes:o,data:t},t.buffer.push(f((s=a.focuspoint||e&&e.focuspoint,s?s.call(e,p):c.call(e,"focuspoint",p)))),t.buffer.push('\n            <div class="block__content center--xy text--bordered text--center">\n                <h2 class="block__title text--uppercase">'),o={},r={},t.buffer.push(f(a._triageMustache.call(e,"title",{hash:{},contexts:[e],types:["ID"],hashContexts:r,hashTypes:o,data:t}))),t.buffer.push('</h2>\n                <p class="block__paragraph">'),o={},r={},t.buffer.push(f(a._triageMustache.call(e,"paragraph",{hash:{},contexts:[e],types:["ID"],hashContexts:r,hashTypes:o,data:t}))),t.buffer.push('</p>\n                <button class="block__toggle-edit" '),o={},r={},t.buffer.push(f(a.action.call(e,"toggleEdit",{hash:{},contexts:[e],types:["STRING"],hashContexts:r,hashTypes:o,data:t}))),t.buffer.push(">"),o={},r={},n=a["if"].call(e,"isEditing",{hash:{},inverse:d.program(4,l,t),fn:d.program(2,i,t),contexts:[e],types:["ID"],hashContexts:r,hashTypes:o,data:t}),(n||0===n)&&t.buffer.push(n),t.buffer.push('</button>\n            </div>\n            <ul class="block__controls">\n                <li>\n                    <label class="label">\n                        <span>Edit image</span>\n                        '),r={type:e,value:e,placeholder:e,action:e,on:e},o={type:"ID",value:"ID",placeholder:"STRING",action:"STRING",on:"STRING"},p={hash:{type:"text",value:"newImage",placeholder:"New image URL",action:"updateImage",on:"enter"},contexts:[],types:[],hashContexts:r,hashTypes:o,data:t},t.buffer.push(f((s=a.input||e&&e.input,s?s.call(e,p):c.call(e,"input",p)))),t.buffer.push('\n                    </label>\n                </li>\n                <li>\n                    <label class="label">\n                        <span>Edit focus point</span>\n                        '),r={image:e},o={image:"ID"},p={hash:{image:"image"},contexts:[],types:[],hashContexts:r,hashTypes:o,data:t},t.buffer.push(f((s=a["focuspoint-helper"]||e&&e["focuspoint-helper"],s?s.call(e,p):c.call(e,"focuspoint-helper",p)))),t.buffer.push("\n                    </label>\n                </li>\n            </ul>\n        </div>\n    "),h}function i(e,t){t.buffer.push("Done")}function l(e,t){t.buffer.push("Edit")}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var o,p,h,u="",c=a.helperMissing,f=this.escapeExpression,d=this;return n.buffer.push('<section class="blocks" id="blocksapp">\n    '),p={itemController:t},h={itemController:"STRING"},o=a.each.call(t,{hash:{itemController:"block"},inverse:d.noop,fn:d.program(1,r,n),contexts:[],types:[],hashContexts:p,hashTypes:h,data:n}),(o||0===o)&&n.buffer.push(o),n.buffer.push("\n</section>\n"),u}),this.Ember.TEMPLATES.focuspoint=Ember.Handlebars.template(function(e,t,a,s,n){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var r,i,l,o,p="",h=a.helperMissing,u=this.escapeExpression;return n.buffer.push("<img "),i={src:t},l={src:"ID"},o={hash:{src:"image"},contexts:[],types:[],hashContexts:i,hashTypes:l,data:n},n.buffer.push(u((r=a["bind-attr"]||t&&t["bind-attr"],r?r.call(t,o):h.call(t,"bind-attr",o)))),n.buffer.push(">\n"),p}),this.Ember.TEMPLATES.focuspointhelper=Ember.Handlebars.template(function(e,t,a,s,n){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var r,i,l,o,p="",h=a.helperMissing,u=this.escapeExpression;return n.buffer.push('<img class="focuspointhelper__image" '),i={src:t},l={src:"ID"},o={hash:{src:"image"},contexts:[],types:[],hashContexts:i,hashTypes:l,data:n},n.buffer.push(u((r=a["bind-attr"]||t&&t["bind-attr"],r?r.call(t,o):h.call(t,"bind-attr",o)))),n.buffer.push('>\n<div class="focuspointhelper__reticle circle"></div>\n'),p}),this.Ember.TEMPLATES.index=Ember.Handlebars.template(function(e,t,a,s,n){function r(e,t){t.buffer.push("go to pages")}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var i,l,o,p,h,u="",c=this,f=a.helperMissing;return n.buffer.push('<section id="index">\n    <h1>Welcome to Gallery</h1>\n    '),o={},p={},h={hash:{},inverse:c.noop,fn:c.program(1,r,n),contexts:[t],types:["STRING"],hashContexts:p,hashTypes:o,data:n},i=a["link-to"]||t&&t["link-to"],l=i?i.call(t,"pages",h):f.call(t,"link-to","pages",h),(l||0===l)&&n.buffer.push(l),n.buffer.push("\n</section>\n"),u}),this.Ember.TEMPLATES.modal=Ember.Handlebars.template(function(e,t,a,s,n){function r(e,t){var s,n,r="";return t.buffer.push("\n    <h2>Generic modal for Application use</h2>\n    <button "),s={},n={},t.buffer.push(c(a.action.call(e,"close",{hash:{},contexts:[e],types:["STRING"],hashContexts:n,hashTypes:s,data:t}))),t.buffer.push(">Close</button>\n"),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var i,l,o,p,h,u="",c=this.escapeExpression,f=this,d=a.helperMissing;return o={action:t},p={action:"STRING"},h={hash:{action:"close"},inverse:f.noop,fn:f.program(1,r,n),contexts:[],types:[],hashContexts:o,hashTypes:p,data:n},i=a["modal-dialog"]||t&&t["modal-dialog"],l=i?i.call(t,h):d.call(t,"modal-dialog",h),(l||0===l)&&n.buffer.push(l),n.buffer.push("\n"),u}),this.Ember.TEMPLATES.page=Ember.Handlebars.template(function(e,t,a,s,n){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var r,i,l="",o=this.escapeExpression;return n.buffer.push('<div class="page">\n    '),r={},i={},n.buffer.push(o(a._triageMustache.call(t,"outlet",{hash:{},contexts:[t],types:["ID"],hashContexts:i,hashTypes:r,data:n}))),n.buffer.push("\n</div>\n"),l}),this.Ember.TEMPLATES.pages=Ember.Handlebars.template(function(e,t,a,s,n){function r(e,t){t.buffer.push("new page")}function i(e,t){t.buffer.push("back to index")}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var l,o,p,h,u,c="",f=this,d=a.helperMissing,g=this.escapeExpression;return n.buffer.push('<section id="pagesapp">\n    <header class="hero" id="hero">\n        <h1 class="hero__title">Pages</h1>\n    </header>\n\n    <section id="main">\n        <ul class="pages__controls">\n            <li>\n                '),p={},h={},u={hash:{},inverse:f.noop,fn:f.program(1,r,n),contexts:[t],types:["STRING"],hashContexts:h,hashTypes:p,data:n},l=a["link-to"]||t&&t["link-to"],o=l?l.call(t,"pages.new",u):d.call(t,"link-to","pages.new",u),(o||0===o)&&n.buffer.push(o),n.buffer.push("\n            </li>\n        </ul>\n        "),p={},h={},n.buffer.push(g(a._triageMustache.call(t,"outlet",{hash:{},contexts:[t],types:["ID"],hashContexts:h,hashTypes:p,data:n}))),n.buffer.push("\n    </section>\n\n    <footer>\n        <p>"),p={},h={},u={hash:{},inverse:f.noop,fn:f.program(3,i,n),contexts:[t],types:["STRING"],hashContexts:h,hashTypes:p,data:n},l=a["link-to"]||t&&t["link-to"],o=l?l.call(t,"index",u):d.call(t,"link-to","index",u),(o||0===o)&&n.buffer.push(o),n.buffer.push("</p>\n        <p>pages footer</p>\n    </footer>\n</section>\n"),c}),this.Ember.TEMPLATES["components/modal-dialog"]=Ember.Handlebars.template(function(e,t,a,s,n){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var r,i,l="",o=this.escapeExpression;return n.buffer.push('<div class="overlay" '),r={},i={},n.buffer.push(o(a.action.call(t,"close",{hash:{},contexts:[t],types:["STRING"],hashContexts:i,hashTypes:r,data:n}))),n.buffer.push('></div>\n<div class="modal">\n    '),r={},i={},n.buffer.push(o(a._triageMustache.call(t,"yield",{hash:{},contexts:[t],types:["ID"],hashContexts:i,hashTypes:r,data:n}))),n.buffer.push("\n</div>\n"),l}),this.Ember.TEMPLATES["page/edit"]=Ember.Handlebars.template(function(e,t,a,s,n){function r(e,t){t.buffer.push("Cancel")}function i(e,t){var s,n,r="";return t.buffer.push("back to "),s={},n={},t.buffer.push(f(a._triageMustache.call(e,"title",{hash:{},contexts:[e],types:["ID"],hashContexts:n,hashTypes:s,data:t}))),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var l,o,p,h,u,c="",f=this.escapeExpression,d=a.helperMissing,g=this;return n.buffer.push("<h1>Edit page "),p={},h={},n.buffer.push(f(a._triageMustache.call(t,"title",{hash:{},contexts:[t],types:["ID"],hashContexts:h,hashTypes:p,data:n}))),n.buffer.push('</h1>\n\n<ul class="page__controls">\n    <li>\n        <label>\n            <span>Title</span>\n            '),h={type:t,placeholder:t,value:t},p={type:"STRING",placeholder:"ID",value:"ID"},u={hash:{type:"text",placeholder:"title",value:"newTitle"},contexts:[],types:[],hashContexts:h,hashTypes:p,data:n},n.buffer.push(f((l=a.input||t&&t.input,l?l.call(t,u):d.call(t,"input",u)))),n.buffer.push("\n        </label>\n    </li>\n    <li>\n        <label>\n            <span>Slug</span>\n            "),h={type:t,placeholder:t,value:t},p={type:"STRING",placeholder:"ID",value:"ID"},u={hash:{type:"text",placeholder:"slug",value:"newSlug"},contexts:[],types:[],hashContexts:h,hashTypes:p,data:n},n.buffer.push(f((l=a.input||t&&t.input,l?l.call(t,u):d.call(t,"input",u)))),n.buffer.push("\n        </label>\n    </li>\n    <li>\n        <label>\n            <span>Paragraph</span>\n            "),h={type:t,placeholder:t,value:t},p={type:"STRING",placeholder:"ID",value:"ID"},u={hash:{type:"text",placeholder:"paragraph",value:"newParagraph"},contexts:[],types:[],hashContexts:h,hashTypes:p,data:n},n.buffer.push(f((l=a.input||t&&t.input,l?l.call(t,u):d.call(t,"input",u)))),n.buffer.push("\n        </label>\n    </li>\n    <li>\n        <label>\n            <span>Image</span>\n            "),h={type:t,placeholder:t,value:t},p={type:"STRING",placeholder:"ID",value:"ID"},u={hash:{type:"text",placeholder:"image",value:"newImage"},contexts:[],types:[],hashContexts:h,hashTypes:p,data:n},n.buffer.push(f((l=a.input||t&&t.input,l?l.call(t,u):d.call(t,"input",u)))),n.buffer.push("\n        </label>\n    </li>\n    <li>\n        <button "),p={},h={},n.buffer.push(f(a.action.call(t,"acceptEdits",{hash:{},contexts:[t],types:["STRING"],hashContexts:h,hashTypes:p,data:n}))),n.buffer.push(">Apply edits</button>\n    </li>\n    <li>\n        "),p={},h={},u={hash:{},inverse:g.noop,fn:g.program(1,r,n),contexts:[t],types:["STRING"],hashContexts:h,hashTypes:p,data:n},l=a["link-to"]||t&&t["link-to"],o=l?l.call(t,"page",u):d.call(t,"link-to","page",u),(o||0===o)&&n.buffer.push(o),n.buffer.push('\n    </li>\n</ul>\n\n<div class="page__back">\n    '),p={},h={},u={hash:{},inverse:g.noop,fn:g.program(3,i,n),contexts:[t],types:["STRING"],hashContexts:h,hashTypes:p,data:n},l=a["link-to"]||t&&t["link-to"],o=l?l.call(t,"page",u):d.call(t,"link-to","page",u),(o||0===o)&&n.buffer.push(o),n.buffer.push("\n</div>\n"),c}),this.Ember.TEMPLATES["page/index"]=Ember.Handlebars.template(function(e,t,a,s,n){function r(e,t){t.buffer.push("edit page")}function i(e,t){t.buffer.push("back to pages")}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var l,o,p,h,u,c="",f=this.escapeExpression,d=this,g=a.helperMissing;return n.buffer.push("<h1>"),p={},h={},n.buffer.push(f(a._triageMustache.call(t,"title",{hash:{},contexts:[t],types:["ID"],hashContexts:h,hashTypes:p,data:n}))),n.buffer.push('</h1>\n\n<ul class="page__controls">\n    <li>\n        '),p={},h={},u={hash:{},inverse:d.noop,fn:d.program(1,r,n),contexts:[t],types:["STRING"],hashContexts:h,hashTypes:p,data:n},l=a["link-to"]||t&&t["link-to"],o=l?l.call(t,"page.edit",u):g.call(t,"link-to","page.edit",u),(o||0===o)&&n.buffer.push(o),n.buffer.push('\n    </li>\n</ul>\n\n\n<div class="page__back">\n    '),p={},h={},u={hash:{},inverse:d.noop,fn:d.program(3,i,n),contexts:[t],types:["STRING"],hashContexts:h,hashTypes:p,data:n},l=a["link-to"]||t&&t["link-to"],o=l?l.call(t,"pages",u):g.call(t,"link-to","pages",u),(o||0===o)&&n.buffer.push(o),n.buffer.push("\n</div>\n"),c}),this.Ember.TEMPLATES["pages/index"]=Ember.Handlebars.template(function(e,t,a,s,n){function r(e,t){var s,n,r,l,o,p="";return t.buffer.push('\n    <li class="page list__item" '),r={style:e},l={style:"ID"},o={hash:{style:"imageStyle"},contexts:[],types:[],hashContexts:r,hashTypes:l,data:t},t.buffer.push(d((s=a["bind-attr"]||e&&e["bind-attr"],s?s.call(e,o):f.call(e,"bind-attr",o)))),t.buffer.push(">\n            "),l={},r={},o={hash:{},inverse:g.noop,fn:g.program(2,i,t),contexts:[e,e],types:["STRING","ID"],hashContexts:r,hashTypes:l,data:t},s=a["link-to"]||e&&e["link-to"],n=s?s.call(e,"page","",o):f.call(e,"link-to","page","",o),(n||0===n)&&t.buffer.push(n),t.buffer.push("\n        </li>\n    "),p}function i(e,t){var s,n,r,i="";return t.buffer.push("\n            "),n={},r={},s=a["if"].call(e,"image",{hash:{},inverse:g.program(5,o,t),fn:g.program(3,l,t),contexts:[e],types:["ID"],hashContexts:r,hashTypes:n,data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            "),i}function l(e,t){var s,n,r,i,l="";return t.buffer.push("\n                <img "),n={src:e},r={src:"ID"},i={hash:{src:"image"},contexts:[],types:[],hashContexts:n,hashTypes:r,data:t},t.buffer.push(d((s=a["bind-attr"]||e&&e["bind-attr"],s?s.call(e,i):f.call(e,"bind-attr",i)))),t.buffer.push(" "),n={alt:e},r={alt:"STRING"},i={hash:{alt:"{{title}}"},contexts:[],types:[],hashContexts:n,hashTypes:r,data:t},t.buffer.push(d((s=a["bind-attr"]||e&&e["bind-attr"],s?s.call(e,i):f.call(e,"bind-attr",i)))),t.buffer.push(">\n            "),l}function o(e,t){var s,n,r="";return t.buffer.push("\n                "),s={},n={},t.buffer.push(d(a._triageMustache.call(e,"title",{hash:{},contexts:[e],types:["ID"],hashContexts:n,hashTypes:s,data:t}))),t.buffer.push("\n            "),r}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var p,h,u,c="",f=a.helperMissing,d=this.escapeExpression,g=this;return n.buffer.push('<ul class="list list-bare" id="pages">\n    '),h={itemController:t},u={itemController:"STRING"},p=a.each.call(t,{hash:{itemController:"page"},inverse:g.noop,fn:g.program(1,r,n),contexts:[],types:[],hashContexts:h,hashTypes:u,data:n}),(p||0===p)&&n.buffer.push(p),n.buffer.push("\n</ul>\n"),c}),this.Ember.TEMPLATES["pages/new"]=Ember.Handlebars.template(function(e,t,a,s,n){function r(e,t){t.buffer.push("back to pages")}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var i,l,o,p,h,u="",c=a.helperMissing,f=this.escapeExpression,d=this;return n.buffer.push('<h1>Create a new page</h1>\n\n<ul class="pages__controls">\n    <li>\n        <label>\n            <span>Title</span>\n            '),o={type:t,placeholder:t,value:t},p={type:"STRING",placeholder:"STRING",value:"ID"},h={hash:{type:"text",placeholder:"Title your page",value:"newTitle"},contexts:[],types:[],hashContexts:o,hashTypes:p,data:n},n.buffer.push(f((i=a.input||t&&t.input,i?i.call(t,h):c.call(t,"input",h)))),n.buffer.push("\n        </label>\n    </li>\n    <li>\n        <label>\n            <span>Slug</span>\n            "),o={type:t,placeholder:t,value:t},p={type:"STRING",placeholder:"STRING",value:"ID"},h={hash:{type:"text",placeholder:"Give your page a slug (optional)",value:"newSlug"},contexts:[],types:[],hashContexts:o,hashTypes:p,data:n},n.buffer.push(f((i=a.input||t&&t.input,i?i.call(t,h):c.call(t,"input",h)))),n.buffer.push("\n        </label>\n    </li>\n    <li>\n        <label>\n            <span>Paragraph</span>\n            "),o={type:t,placeholder:t,value:t},p={type:"STRING",placeholder:"STRING",value:"ID"},h={hash:{type:"text",placeholder:"Give your page a paragraph (optional)",value:"newParagraph"},contexts:[],types:[],hashContexts:o,hashTypes:p,data:n},n.buffer.push(f((i=a.input||t&&t.input,i?i.call(t,h):c.call(t,"input",h)))),n.buffer.push("\n        </label>\n    </li>\n    <li>\n        <label>\n            <span>Image</span>\n            "),o={type:t,placeholder:t,value:t},p={type:"STRING",placeholder:"STRING",value:"ID"},h={hash:{type:"text",placeholder:"Give your page an image (optional)",value:"newImage"},contexts:[],types:[],hashContexts:o,hashTypes:p,data:n},n.buffer.push(f((i=a.input||t&&t.input,i?i.call(t,h):c.call(t,"input",h)))),n.buffer.push("\n        </label>\n    </li>\n    <li>\n        <button "),p={},o={},n.buffer.push(f(a.action.call(t,"createPage",{hash:{},contexts:[t],types:["STRING"],hashContexts:o,hashTypes:p,data:n}))),n.buffer.push(">Create page</button>\n    </li>\n</ul>\n\n<div>\n    "),p={},o={},h={hash:{},inverse:d.noop,fn:d.program(1,r,n),contexts:[t],types:["STRING"],hashContexts:o,hashTypes:p,data:n},i=a["link-to"]||t&&t["link-to"],l=i?i.call(t,"pages",h):c.call(t,"link-to","pages",h),(l||0===l)&&n.buffer.push(l),n.buffer.push("\n</ul>\n"),u}),function(){"use strict";App.Router.map(function(){this.resource("pages",{path:"/pages"},function(){this.route("new")}),this.resource("page",{path:":page_id"},function(){this.route("edit"),this.resource("blocks",{path:"/blocks"},function(){this.route("edit")})})}),App.ApplicationRoute=Ember.Route.extend({actions:{openModal:function(e,t){return this.controllerFor(e).set("model",t),this.render(e,{into:"application",outlet:"modal"})},closeModal:function(){return this.disconnectOutlet({outlet:"modal",parentView:"application"})}}}),App.PagesRoute=Ember.Route.extend({model:function(){return this.store.find("page")}}),App.PageRoute=Ember.Route.extend({afterModel:function(){this.transitionTo("blocks.index")}}),App.BlocksRoute=Ember.Route.extend({model:function(){return this.modelFor("page").get("blocks")}})}(),function(){"use strict";var e=DS.attr,t=DS.hasMany;App.Page=DS.Model.extend({createdAt:e("date",{defaultValue:function(){return(new Date).toISOString()}}),title:e("string"),slug:e("string"),paragraph:e("string"),image:e("string"),blocks:t("block",{async:!0})}),App.Page.reopenClass({FIXTURES:[{id:1,title:"Ferrari",slug:"ferrari",paragraph:"An expose of Ferrari's",image:"//lh6.googleusercontent.com/-c8CcCzSEH6w/UT4HMJE4j9I/AAAAAAABNj8/2puHpt9nL34/s250-no/prova_logo.jpg",blocks:[1,2]},{id:2,title:"Lambos",slug:"lambos",paragraph:"An expose of Lambo's",image:"//lh4.googleusercontent.com/-Kcv3WfzI-uU/Uk2OU8-yXgI/AAAAAAAAZ28/5X4DCD4JmOc/s380-no/Logo%2BGoogle%2BPlus.jpg",blocks:[3]},{id:3,title:"Paganis",slug:"paganis",paragraph:"An expose of Zonda's",image:"//1.bp.blogspot.com/-PlCC786di88/UNnfBTjvuII/AAAAAAAAG3k/tM-_53B3rgE/s400/Pagani+Logo+5.jpg",blocks:[]}]})}(),function(){"use strict";var e=DS.attr,t=DS.belongsTo;App.Block=DS.Model.extend({createdAt:e("date",{defaultValue:function(){return(new Date).toISOString()}}),title:e("string"),paragraph:e("string"),image:e("string"),focusX:e(""),focusY:e(""),imageW:e(""),imageH:e(""),page:t("page")}),App.Block.reopenClass({FIXTURES:[{id:1,title:"Ferrari Panorama",paragraph:"Ferrari (and a Lambo) Panorama taken at Cars and Coffee in Irvine.",image:"//farm8.staticflickr.com/7307/8732672635_ff80790616_k_d.jpg",focusX:0,focusY:0,imageW:2048,imageH:740,page:1},{id:2,title:"Axion23",paragraph:"Ferrari Supercars - F40, F50, and Enzo.",image:"//farm6.staticflickr.com/5332/9376918883_ef2844c3c0_k_d.jpg",focusX:0,focusY:0,imageW:2048,imageH:1356,page:1},{id:3,title:"Spot The Odd One Out",paragraph:"Roadtrip car feat some Lambos!",image:"//farm3.staticflickr.com/2898/14449510770_2f18830e87_k_d.jpg",focusX:0,focusY:0,imageW:2048,imageH:1365,page:2}]})}(),function(){"use strict";App.ModalController=Ember.ObjectController.extend({actions:{close:function(){return this.send("closeModal")}}})}(),function(){"use strict";App.PagesNewController=Ember.ArrayController.extend({actions:{createPage:function(){function e(){}function t(e){console.log(e)}var a=this.get("newTitle"),s=this.get("newSlug"),n=this.get("newParagraph"),r=this.get("newImage");if(Ember.isEmpty(a))return!1;a=a.trim(),a&&!s&&(s=a.trim().dasherize());var i=this.store.createRecord("page",{title:a,slug:s,paragraph:n,image:r});i.save(e,t)}}})}(),function(){"use strict";App.PageController=Ember.ObjectController.extend({actions:{editPage:function(){this.set("isEditing",!0)}},isEditing:!1,imageStyle:function(){return"background-image: url("+this.get("image")+");"}.property("imageStyle")}),App.PageEditController=Ember.ObjectController.extend({actions:{acceptEdits:function(){this.set("isEditing",!1);var e=this,t=!1,a=function(){var a={};return["newTitle","newSlug","newParagraph","newImage"].forEach(function(s){var n=e.get(s);Ember.isPresent(n)&&(t=!0,e.set(s,""),a[s.slice(3).toLowerCase()]=n)}),a}();if(t){var s=this.get("model");s.setProperties(a),s.save()}}}})}(),function(){"use strict";App.BlocksNewController=Ember.ArrayController.extend({actions:{createBlock:function(){var e=this.get("newTitle"),t=this.get("newParagraph"),a=this.get("newImage");if(Ember.isEmpty(e))return!1;e=e.trim();var s=this.store.createRecord("block",{title:e,paragraph:t,image:a});this.set("newTitle",""),this.set("newParagraph",""),this.set("newImage",""),s.save()}}})}(),function(){"use strict";App.BlockController=Ember.ObjectController.extend({actions:{editBlock:function(){this.set("isEditing",!0)},doneEditing:function(){this.set("isEditing",!1)},toggleEdit:function(){var e=this.get("isEditing");this.set("isEditing",!e)},updateFocusPoint:function(e){if(!Ember.isEmpty(e.focusX||Ember.isEmpty(e.focusY))){var t=this.get("model");t.setProperties(e),t.save()}},updateImage:function(){var e=this.get("newImage");if(!Ember.isEmpty(e)){var t=this.get("model");t.set("image",e),t.save()}}},isEditing:!1,imageStyle:function(){return"background-image: url("+this.get("image")+");"}.property("imageStyle")})}(),function(){"use strict";App.ModalDialogComponent=Ember.Component.extend({actions:{close:function(){return this.sendAction()}}})}(),function(){"use strict";App.FocuspointView=Ember.View.extend({classNames:["focuspoint block__image"],templateName:"focuspoint",attributeBindings:["data-focus-x","data-focus-y","data-image-w","data-image-h"],didInsertElement:function(){Ember.run.scheduleOnce("afterRender",this,"processChildElements")},processChildElements:function(){this.$().focusPoint({throttleDuration:100})}}),Ember.Handlebars.helper("focuspoint",App.FocuspointView)}(),function(){"use strict";App.FocuspointhelperView=Ember.View.extend({classNames:["focuspointhelper"],templateName:"focuspointhelper",didInsertElement:function(){Ember.run.scheduleOnce("afterRender",this,"processChildElements")},processChildElements:function(){var e=this,t=this.$().find(".focuspointhelper__reticle");interact(t[0]).draggable({max:1,onmove:function(a){var s=t.closest(".block").find(".focuspoint"),n=t.closest(".focuspointhelper").find(".focuspointhelper__image"),r=n.width(),i=n.height(),l=a.pageX-n.offset().left,o=a.pageY-n.offset().top,p=2*(l/r-.5),h=-2*(o/i-.5),u={};u.focusX=p,u.focusY=h,e.get("controller").send("updateFocusPoint",u),s.data("focus-x",p),s.data("focus-y",h),s.focusPoint("adjustFocus");var c=a.target,f=(parseFloat(c.getAttribute("data-x"))||0)+a.dx,d=(parseFloat(c.getAttribute("data-y"))||0)+a.dy;c.style.webkitTransform=c.style.transform="translate("+f+"px, "+d+"px)",c.setAttribute("data-x",f),c.setAttribute("data-y",d)}}).restrict({drag:"parent",endOnly:!1,elementRect:{top:0,left:0,bottom:1,right:1}})}}),Ember.Handlebars.helper("focuspoint-helper",App.FocuspointhelperView)}();